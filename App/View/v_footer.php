<!-- START FOOTER AREA -->
<footer id="footer" class="footer-area">
    <div class="footer-top">
        <div class="container-fluid">
            <div class="plr-185">
                <div class="footer-top-inner gray-bg">
                    <div class="row">
                        <div class="col-lg-4 col-md-5 col-sm-4">
                            <div class="single-footer footer-about">
                                <div class="footer-logo">
                                    <img src="Public/img/logo/VINATECH 2.png" alt="main logo">

                                </div>
                                <div class="footer-brief">
                                    <p>Chúng tôi đã cam kết mang đến những sản phẩm chất lượng cao từ những thương hiệu
                                        danh tiếng như Nike, Adidas, Puma, Converse, và nhiều thương hiệu khác. Tại đây,
                                        bạn sẽ không chỉ tìm thấy những đôi giày đẳng cấp mà còn trải nghiệm không gian
                                        mua sắm trực tuyến tiện lợi và an toàn.</p>
                                </div>
                                <ul class="footer-social">
                                    <li>
                                        <a class="facebook" href="" title="Facebook"><i
                                                class="zmdi zmdi-facebook"></i></a>
                                    </li>
                                    <li>
                                        <a class="google-plus" href="" title="Google Plus"><i
                                                class="zmdi zmdi-google-plus"></i></a>
                                    </li>
                                    <li>
                                        <a class="twitter" href="" title="Twitter"><i class="zmdi zmdi-twitter"></i></a>
                                    </li>
                                    <li>
                                        <a class="rss" href="" title="RSS"><i class="zmdi zmdi-rss"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-8 col-md-7 col-sm-8" style="margin-top: 40px;">
                            <div class="newsletter">
                                <div class="newsletter-info text-center">
                                    <h2 class="newsletter-title">liên hệ với chúng tôi!</h2>
                                    <p>Hãy chắc chắn rằng bạn không bao giờ bỏ lỡ tin tức thú vị của chúng tôi
                                        bằng cách tham gia chương trình bản tin của chúng tôi.</p>
                                </div>
                                <div class="subcribe clearfix">
                                    <form action="#">
                                        <input type="text" name="email" placeholder="Email Của Bạn..." />
                                        <button class="submit-btn-2 btn-hover-2" type="submit">Xác Nhận</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom black-bg">
        <div class="container-fluid">
            <div class="plr-185">
                <div class="copyright">
                    <div class="row">
                        <div class="col-sm-6 col-xs-12">
                            <div class="copyright-text">
                                <p>&copy; <a href="https://themeforest.net/user/codecarnival/portfolio"
                                        target="_blank">CodeCarnival</a> 2016. All Rights Reserved.</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xs-12">
                            <ul class="footer-payment text-right">
                                <li>
                                    <a href="#"><img src="img/payment/1.jpg" alt=""></a>
                                </li>
                                <li>
                                    <a href="#"><img src="img/payment/2.jpg" alt=""></a>
                                </li>
                                <li>
                                    <a href="#"><img src="img/payment/3.jpg" alt=""></a>
                                </li>
                                <li>
                                    <a href="#"><img src="img/payment/4.jpg" alt=""></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- END FOOTER AREA -->

<!-- START QUICKVIEW PRODUCT -->
<div id="quickview-wrapper">
    <!-- Modal -->
    <div class="modal fade" id="productModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="modal-product clearfix">
                        <div class="product-images">
                            <div class="main-image images">
                                <img alt="" src="img/product/quickview.jpg">
                            </div>
                        </div><!-- .product-images -->

                        <div class="product-info">
                            <h1>Aenean eu tristique</h1>
                            <div class="price-box-3">
                                <div class="s-price-box">
                                    <span class="new-price">£160.00</span>
                                    <span class="old-price">£190.00</span>
                                </div>
                            </div>
                            <a href="single-product-left-sidebar.html" class="see-all">See all features</a>
                            <div class="quick-add-to-cart">
                                <form method="post" class="cart">
                                    <div class="numbers-row">
                                        <input type="number" id="french-hens" value="3">
                                    </div>
                                    <button class="single_add_to_cart_button" type="submit">Add to cart</button>
                                </form>
                            </div>
                            <div class="quick-desc">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam fringilla augue nec
                                est tristique auctor. Donec non est at libero.
                            </div>
                            <div class="social-sharing">
                                <div class="widget widget_socialsharing_widget">
                                    <h3 class="widget-title-modal">Share this product</h3>
                                    <ul class="social-icons clearfix">
                                        <li>
                                            <a class="facebook" href="#" target="_blank" title="Facebook">
                                                <i class="zmdi zmdi-facebook"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="google-plus" href="#" target="_blank" title="Google +">
                                                <i class="zmdi zmdi-google-plus"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="twitter" href="#" target="_blank" title="Twitter">
                                                <i class="zmdi zmdi-twitter"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pinterest" href="#" target="_blank" title="Pinterest">
                                                <i class="zmdi zmdi-pinterest"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="rss" href="#" target="_blank" title="RSS">
                                                <i class="zmdi zmdi-rss"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div><!-- .product-info -->
                    </div><!-- .modal-product -->
                </div><!-- .modal-body -->
            </div><!-- .modal-content -->
        </div><!-- .modal-dialog -->
    </div>
    <!-- END Modal -->
</div>
<!-- END QUICKVIEW PRODUCT -->
</div>
<!-- Body main wrapper end -->

<script>
function checkPassword() {
    var password = document.getElementById("matkhau");
    var confirmPassword = document.getElementById("nhaplaimatkhau");
    var errorMessage = document.getElementById('error-message');
    if (password.value !== confirmPassword.value) {
        confirmPassword.style.boxShadow = '0 0 4px #f00';
        errorMessage.textContent = 'Vui lòng nhập lại mật khẩu. Mật khẩu không khớp!';
        return false;
    }
}
</script>
<script>
function add_product_cart(id, soluong) {
    // var countElement = document.getElementById("item-add-cart" + id);
    // Gọi hàm xử lý khi giảm số lượng
    const formData = new FormData();
    formData.append('id', id);
    formData.append('soluong', soluong);
    // Tiến hành gửi Ajax để upload file ảnh và dữ liệu
    $.ajax({
        url: '<?=BASE_PATH?>' + '/addcart',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            var scrollPosition = window.scrollY;
            location.reload();
            window.scrollTo(0, scrollPosition);
            // alert("Thêm sản phẩm vào giỏ hàng thành công!");
        },
        error: function(xhr, status, error) {
            // Xử lý lỗi (nếu có)
            alert("Thêm sản phẩm vào giỏ hàng thất bại!");

        }
    });
}
var addToCartButtons1 = document.querySelectorAll('.add-to-cart');
// console.log(addToCartButtons1);
addToCartButtons1.forEach(function(item) {
    item.addEventListener('click', function(event) {
        var productId = item.getAttribute('data-id');

        add_product_cart(productId, 1);

    })
})

var sanphamcart = document.querySelector('#sanpham').querySelectorAll('tr');

var tongGiaSanPham = 0;

// Duyệt qua từng hàng trong giỏ hàng
sanphamcart.forEach(function(item) {
    var productPrice = parseFloat(item.querySelector('.product-price').textContent.trim().replace('$', ''));
    var productQuantitySelect = item.querySelector('.product-quantity select');
    var productSubtotalElement = item.querySelector('.product-subtotal');

    // Khai báo hàm tính toán tổng giá sản phẩm
    function calculateTotal() {
        var quantity = parseInt(productQuantitySelect.value);
        var subtotal = productPrice * quantity;
        productSubtotalElement.textContent = '$' + subtotal.toFixed(2);
        // Cập nhật lại tổng giá sản phẩm
        updateTotalPrice();
        // console.log(ttt);
    }

    function changequanlity() {
        var quantity = parseInt(productQuantitySelect.value);
        var id = productQuantitySelect.getAttribute('data-id');
        add_product_quanlity(id, quantity)
    }
    // Thêm sự kiện onchange cho select
    productQuantitySelect.addEventListener('change', calculateTotal);
    productQuantitySelect.addEventListener('change', changequanlity);
    // Tính tổng giá sản phẩm lần đầu tiên
    calculateTotal();
});

function add_product_quanlity(id, quantity) {
    // var countElement = document.getElementById("item-add-cart" + id);
    // Gọi hàm xử lý khi giảm số lượng
    const formData = new FormData();
    formData.append('id', id);
    formData.append('soluong', quantity);
    // Tiến hành gửi Ajax để upload file ảnh và dữ liệu
    $.ajax({
        url: '<?=BASE_PATH?>' + '/update',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            // console.log(response);

            // var scrollPosition = window.scrollY;
            // location.reload();
            // window.scrollTo(0, scrollPosition);
            // alert("Thêm sản phẩm vào giỏ hàng thành công!");
        },
        error: function(xhr, status, error) {
            // Xử lý lỗi (nếu có)
            alert("cập nhật thất bại!");

        }
    });
}
// Hàm cập nhật tổng giá sản phẩm
function updateTotalPrice() {
    var totalPriceElements = document.querySelector('#sanpham').querySelectorAll('.product-subtotal');
    var totalPrice = 0;
    // Tính tổng giá sản phẩm
    totalPriceElements.forEach(function(element) {
        var subtotal = parseFloat(element.textContent.trim().replace('$', ''));
        totalPrice += subtotal;
    });
    document.querySelector('.td-title-2').textContent = '$' + totalPrice.toFixed(2);
    document.querySelector('.order-total-price').textContent = '$' + totalPrice.toFixed(2);
    document.querySelector('.tongphu').textContent = '$' + totalPrice.toFixed(2);
    document.querySelector('.tongthanhtoan').textContent = '$' + totalPrice.toFixed(2);


    return totalPrice;
}
var dssanphamcart = document.querySelector('#dssanpham').querySelectorAll('tr');
console.log(document.querySelectorAll('.order-total-price'));

// console.log(dssanphamcart);
dssanphamcart.forEach(function(item) {
    const c = updateTotalPrice()
});
</script>
<!-- Placed JS at the end of the document so the pages load faster -->

<!-- jquery latest version -->
<script src="<?=BASE_PATH?>/Public/js/vendor/jquery-3.1.1.min.js"></script>
<!-- Bootstrap framework js -->
<script src="<?=BASE_PATH?>/Public/js/bootstrap.min.js"></script>
<!-- jquery.nivo.slider js -->
<script src="<?=BASE_PATH?>/Public/lib/js/jquery.nivo.slider.js"></script>
<!-- All js plugins included in this file. -->
<script src="<?=BASE_PATH?>/Public/js/plugins.js"></script>
<!-- Main js file that contents all jQuery plugins activation. -->
<script src="<?=BASE_PATH?>/Public/js/main.js"></script>

</body>

</html>